function patches = dcp_extract(params, discovery_set, world_set)
% param1: discovery_set: discovery image set. The filenames of the images
%         from which discriminative patches should be extracted
%         (different resolutions between the images are allowed)
% param2: world_set: HOG-Descriptor matrix of the initially generated
%         "natural world set". A natural world set can be generated by
%         executing 'dcp_generate_world_set.m'
% return: The extracted most discriminative patches organised as cell array
% 
% Before calling this function, make sure that a valid world set is present.
% Otherwise generate it by executing 'dcp_generate_world_set.m' once

% Initial steps
npictures = size(discovery_set,1);

% extract patches from all images
npatches_per_pic = ceil(params.npatches*params.one_patch_out_of/npictures);

for i = 1:npictures
    % read image
    I = im2single(vl_imreadgray(discovery_set{i}));
    
    % extract random patches of the discovery set
    % random patches
    patches = dcp_get_random_patches(params, I, npatches_per_pic);
    if isempty(patches)
        display('An error occured with the input data');
        return; 
    end
    
    % calculate HOG descriptors of dicovery set
    
    
    % store mapping
end



% permutate patches of both discovery and world set randomly and
% divide discovery_set and world_set into two subsets
shuffled_indizes = randperm();


patches = 0;